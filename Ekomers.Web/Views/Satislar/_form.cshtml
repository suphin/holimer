@model SatislarVM
<div class="form-group row">
    <div class="col-6">
        <label class="control-label">Personel </label>
        <input asp-for="CariTipi" type="radio" value="false" name="CariTipi" />
    </div>
    <div class="col-6">
        <label class="control-label">Müşteri/Hasta </label>
        <input asp-for="CariTipi" type="radio" value="true" name="CariTipi" />
    </div>
</div>
<div class="form-group row">
    
    <div class="col-lg-3">
        <label asp-for="SebepAd" class="control-label"></label>
        <select asp-for="SebepID" class="kt_select2" data-live-search="true" data-size="5" asp-items="@(new SelectList(ViewBag.SatislarSebepListe, "ID", "Ad"))"></select>
        <span asp-validation-for="SebepAd" class="text-danger"></span>
    </div>
    <div class="col-lg-3">
        <label asp-for="DurumAd" class="control-label"></label>
        <select asp-for="DurumID" class="kt_select2" data-live-search="true" data-size="5" asp-items="@(new SelectList(ViewBag.SatislarDurumListe, "ID", "Ad"))"></select>
        <span asp-validation-for="DurumAd" class="text-danger"></span>
    </div>
    <div class="col-lg-3">
        <label asp-for="SorumluAd" class="control-label"></label>
        <select asp-for="SorumluID" class="kt_select2" data-live-search="true" data-size="5" asp-items="@(new SelectList(ViewBag.SorumluListe,"Id","AdSoyad"))"></select>
        <span asp-validation-for="SorumluAd" class="text-danger"></span>
    </div>
    <div class="col-lg-3">
        <label asp-for="PlatformAd" class="control-label"></label>
        <select asp-for="PlatformID" class="kt_select2" data-live-search="true" data-size="5" asp-items="@(new SelectList(ViewBag.SatislarPlatformListe, "ID", "Ad"))"></select>
        <span asp-validation-for="PlatformAd" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <div id="personelFields" style="display:@(Model?.CariTipi == false ? "block" : "none")">

        <div class="col-lg-6">
            <label asp-for="SorumluAd" class="control-label"></label>
            <select asp-for="SorumluID" class="kt_select2" data-live-search="true" data-size="5" asp-items="@(new SelectList(ViewBag.SorumluListe, "Id", "AdSoyad"))"></select>
            <span asp-validation-for="SorumluAd" class="text-danger"></span>
            
        </div>

    </div>
    <div id="cariFields" style="display:@(Model?.CariTipi == true ? "block" : "none")">

        <div class="col-lg-6">
            @{
                // await Html.RenderPartialAsync("~/Views/Musteriler/_selectList.cshtml", Model?.Musteri ?? new Musteriler());
            }
            <partial name="~/Views/Musteriler/_selectList.cshtml" model="Model?.Musteri ?? new Musteriler()" />
        </div>

    </div>
    <div class="col-lg-3">
        <label asp-for="SiparisNo" class="control-label"></label>
        <input asp-for="SiparisNo" class="form-control form-control-sm" required />
        <span asp-validation-for="SiparisNo" class="text-danger"></span>

    </div>
    <div class="col-lg-3">
        <label asp-for="SiparisToplam" class="control-label"></label>
        <input asp-for="SiparisToplam" class="form-control form-control-sm" required />
        <span asp-validation-for="SiparisToplam" class="text-danger"></span>

    </div>



</div>
 

 
<div class="form-group row">
    <div class="col-lg-12">
        <label asp-for="Not" class="control-label"></label>
        <textarea asp-for="Not" type="text" class="form-control form-control-sm" rows="2" required></textarea>
        <span asp-validation-for="Not" class="text-danger"></span>
    </div>
</div>
@if (Model.ID>0)
{
  
    <div id="UrunlerDiv">

    </div>
   
}

<script src="js/select2.js?v=7.0.5"></script>

<script>
    (function () {
      function toggleCariFields() {
        // value "true" seçili mi?
        var CariTipi = document.querySelector('input[name="CariTipi"]:checked')?.value === 'true';
        var wrap = document.getElementById('cariFields');
        var wrap2 = document.getElementById('personelFields');

        if (!wrap) return;
        if (!wrap2) return;

        // İçerideki form elemanları
        var inputs = wrap.querySelectorAll('input, select, textarea');

        if (CariTipi) {
          wrap.style.display = 'block';
          wrap2.style.display = 'none';
          inputs.forEach(function (el) {
            el.disabled = false; // doğrulama/submit'e tekrar dahil et
          });
        } else {
          wrap.style.display = 'none';
          inputs.forEach(function (el) {
            el.disabled = true;  // doğrulamadan ve submit'ten çıkar
            // istersen değerleri de temizle:
            // if (el.type !== 'hidden') el.value = '';
          });
          // Görsel hata mesajlarını temizlemek istersen:
          wrap.querySelectorAll('.text-danger').forEach(function (s) { s.textContent = ''; });
        }
      }

      // Değişimde çalıştır
      document.addEventListener('change', function (e) {
        if (e.target && e.target.name === 'CariTipi') {
          toggleCariFields();
        }
      });

      // Sayfa yüklenince mevcut değere göre ilk ayar
      document.addEventListener('DOMContentLoaded', toggleKurumFields);
    })();
</script>


 
 